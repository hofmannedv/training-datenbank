Datenbanken und Anwendungen (3 Tage)
====================================
:author:    Frank Hofmann <frank.hofmann@efho.de>
:backend:   slidy
:data-uri:  http://www.efho.de/
:max-width: 94%
:icons:

== Inhalt ==

* Ablauf
* Einführung
** Was ist eine Datenbank
** Formate und Varianten
** Zugangswege
** Speicherformen
* DBMS (Auswahl)
* Zugriff
* Ziel einer Datenbank
* Auswahlkriterien eines DBMS
* Ablauf eines Zugriffs auf eine Datenbank
* Datenbankaufträge
* Anwendung im Kurs
* Werkzeuge im Projekt 
* Ablauf -- Schritte 1 bis 8

== Einführung ==

=== Was ist eine Datenbank ===

* Behälter zur Speicherung von Daten
* Behälter wird abgebildet als 
** gesamter Inhalt eines Speichermediums (Oracle DB)
** Datei im Dateisystem: `/var/lib/postgresql/version/main` (PostgreSQL)

image::postgresql-pfad.png[id="fig.postgresql-pfad", width="30%"]

=== DB vs DBS vs DBMS ===

DB:: Abkürzung für Datenbank ('database')

DBS:: Abkürzung für Datenbanksystem ('database system')

DMBS:: Abkürzung für Datenbank-Management-System ('database management system')

image::db-vs-dbms.png[id="fig.db-vs-sbms", width="30%"]

=== DBS-Formen ===

lokal:: alles auf einem einzigen Computer bzw. Speichermedium

verteilt ('distributed'):: über mehrere Computer und Speichermedien verteilt

== Formate und Varianten ==

=== Komma-separierte Werte (CSV) ===

* Speicherung als Tabelle mit einzelnen Spalten
* Trennzeichen als Spaltentrenner
** Leerzeichen
** Tabulator
** Komma
** Semikolon

.adressen.txt
----
Name;Strasse;Ort;Postleitzahl;Telefon
Rainer Zufall;Rathausplatz 15;Potsdam;14467;(0331) 123456
Holger Glück;Am Nordtor 5;Nauen;14641;
----

=== Text und Tabellen (ASCII oder Binär) ===

* speichert das DBMS
* Format legt das DBMS fest

----
==================================================================
|Name         |Strasse        |Ort    |Postleitzahl|Telefon      |
==================================================================
|Rainer Zufall|Rathausplatz 15|Potsdam|14467       |(0331) 123456|
|Holger Glück |Am Nordtor 5   |Nauen  |14641       |             |
==================================================================
----

=== Extended Markup Language (XML) ===

* Speicherung als Knoten und Knoteninhalte
* Knoten via `<knotenname>Inhalt</knotenname>`

.adressen.xml
----
<adressliste>
	<adresse>
		<name>Rainer Zufall></name>
		<strasse>Rathausplatz 15</strasse>
		<ort>Potsdam</ort>
		<postleitzahl>14467</postleitzahl>
		<telefon>(0331) 123456</telefon>
	</adresse>
	<adresse>
		<name>Holger Glück</name>
		<strasse>Am Nordtor 5</strasse>
		<ort>Nauen</ort>
		<postleitzahl>14641</postleitzahl>
		<telefon></telefon>
	</adresse>
</adressliste>
----

=== BLOB ===

* Abkürzung für 'binary large objects'
* Speicherung als Binärinhalt

=== JSON ===

* Abkürzung für 'JavaScript Object Notation'
* serialisierte Datenmenge

.adressen.json
----
{
	"name": "Rainer Zufall",
	"strasse": "Rathausplatz 15",
	"ort": "Potsdam",
	"postleitzahl": "14467",
	"telefon": "(0331) 123456"
}
----

== Zugangswege ==

* Programm via Library oder ODBC/DBI-Treiber zum DBS
** ODBC: Open Database Connectivity
** DBI: Database Interface

* Datenbank-Konsole (Terminal)

image::db-zugangswege.png[id="fig.db-zugangswege", width="90%"]

== Speicherformen ==

* nach außen
** raw-Daten auf Speichermedium (bspw. Oracle DB)
** Datei (bspw. MySQL)

* nach innen
** zeilenbasiert (CSV)
** Tabellen  (bspw. MySQL, PostgreSQL)
** Graph (bspw. neo4j)
** als Objekt (bspw. DB40, Zope Object Database)

* Unterschiede
** ein Datensatz pro Zeile: `Name;Straße;Ort;PLZ`
** ein Datensatz aus mehreren Entitäten (XML): `<name></name> ... <plz></plz>`
** ein Datensatz aus mindestens einem Knoten (Graph): `[ID][Inhalt][*->][*->]`

* Kriterien
** feste vs. variable Spalten
** feste vs. variable Größe pro Datensatz

----
Ziel 1: wie speichert und verwaltet ein DBMS seine Inhalte
Ziel 2: Vor- und Nachteile verschiedener Formate
----

== DBMS (Auswahl) ==

* MS SQL Server (https://www.microsoft.com/de-de/sql-server/sql-server-2017)
* Oracle MySQL (https://www.mysql.com/)
* PostgreSQL (https://www.postgresql.org/)
* MariaDB (https://mariadb.org/)
* Firebird (https://www.firebirdsql.org/)
* neo4j (http://neo4j.com/)
* MongoDB (https://www.mongodb.com/de)
* SQLite (https://www.sqlite.org/)
* rSQL (http://www.rsql.ch/)

----
Ziel: Namen und Typen von DBMS zuordnen
----

== Zugriff ==

=== Anfragesprache === 

SQL:: Structured Query Language

----
SELECT Name,Telefonnummer FROM Adressen;
----

XSLT:: eXtensible Stylesheet Language

Beispiel: https://www.w3schools.com/xml/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_ex3

=== Tools auf der Kommandozeile (Auswahl) ===

* CSV: Standard-UNIX-Tools, bspw. `cut`, `tr`, `awk`

.Erste und vierte Spalte ausgeben
----
$ echo "Holger Glück;Am Nordtor 5;Nauen;14641;" | awk -F ";" '{ print $1, $4 }'
Holger Glück 14641
$
----

* XML: `xsltproc`, `xmlstarlet`
* JSON: `jq`

----
Ziel: wie greife ich auf Inhalte einer DB zu
----

== Ziel einer Datenbank ==

* Daten strukturiert speichern und wiederfinden
* Informationen erhalten
* Daten auswerten (in begrenztem Maße)

----
Ziel: Aufgaben eines DBMS
----

== Auswahl einer Datenbank (Kriterien) ==

* Datenmenge
* Variabilität, Veränderlichkeit
* Datentyp: Text vs. Binär (Bilder)
* Zugriffsform/-häufigkeit
* IT-Struktur rundherum

----
Ziel: Kriterien zur Auswahl eines geeigneten DBMS und seiner Struktur
----

== Ablauf eines Zugriffs auf eine Datenbank ==

* zur Datenbank verbinden
* Auftrag absenden
* Ergebnis holen
* Verbindung beenden
* Ergebnis auswerten
* Ergebnis darstellen
* Drumherum: Anwendungslogik

----
Ziel: wie funktioniert ein DBMS
----

== Datenbankaufträge ==

* Datenbank anlegen (CREATE)
* Daten einfügen (INSERT)
* Daten ändern (UPDATE)
* Daten löschen (DELETE)
* Daten auswählen (SELECT)

----
Ziel: wie spreche ich ein DBMS an
----

== Anwendung im Kurs ==

Adressbuch:: Nutzer-ID, Name, Straße, Ort, PLZ, Telefonnummer

Inventardatenbank/-verzeichnis:: Inventarnummer, Verwaltungsbereich, Beschreibung, Kaufpreis, Kaufdatum

Verwaltung:: Nutzer-ID, Verwaltungsbereich

----
Ziel: Datenstruktur zusammenstellen, verstehen und verbinden
----

== Werkzeuge im Projekt ==

* Webserver (Apache, Nginx)
* Datenbank (MySQL, PostgreSQL)
* Webbasierter Zugriff mit PHPMyAdmin
* Implementierung in einer Programmiersprache (PHP, Python)

----
Ziel: was brauchen wir dafür
----

== Ablauf ==

=== Mit der Datenbank vertraut werden ===

* Kommandozeile/Terminal-Interface
* Tabelle anlegen und löschen
* Tabelle auflisten
* Daten einfügen
* Daten auswählen
* Daten löschen
* Daten ändern

----
Ziel: Datenbank mit leerer Tabelle und fertiger Struktur
----

=== Webserver einrichten und testen ===

* Installation Apache Webserver
* Test auf Erreichbarkeit des Webservers

----
Ziel: Einrichtung und Prüfung eines Webservers verstehen
----

=== PHP einrichten und damit vertraut werden ===

* PHP ergänzen ('mod_php' installieren und aktivieren)
* PHP vs HTML

----
Ziel: erste kleine Anwendung schreiben: php_info()
----

=== HTML ===

* Links und Verweise
* Varianten und der Umgang mit Eingabefeldern
* Parameter übergeben zwischen Skripts
* Validierung der Parameter

----
Ziel: Menüauswahl realisieren
----

=== PHP ===

* externe Dateien einbeziehen
* HTML-Modul
* Datenbank-Modul

----
Ziel: Modularisierung des Projekts/der Anwendung (Nutzen fertiger Module)
----

* Anwendungskonzept umsetzen
** Tabelleninhalt anzeigen und verstehen
** Eintrag ergänzen, ändern, löschen
** Eintrag suchen (filtern)

=== Richtig suchen und filtern ===

* Suche mit Textvergleichen
* Reguläre Ausdrücke nutzen

=== Sortieren nach Tabellenspalte ===

* `ORDER BY`

=== Schick machen mit CSS ===

* Einstieg in CSS

== Links ==

Link

== Danksagung ==

Danke an:

